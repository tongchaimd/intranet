extends ../layout.pug

block title
	title= helpers.buildTitle('Business Cards')
block hero
	.hero.is-dark
		.hero-body
			h1.title Business Cards
block content
	.level.is-mobile
		.level-left
			a.button.is-info.level-item(href=paths.newBusinessCard())
					span.icon
						i.fas.fa-plus
					span Add Business Card
		.level-right
			.dropdown.level-item
				.dropdown-trigger(onclick="this.parentNode.classList.toggle('is-active')")
					button.button
						span.is-capitalized= preferLang
						span.icon.is-small
							i.fas.fa-angle-down
				.dropdown-menu
					.dropdown-content
						each language in languageList
							if language !== preferLang
								a.dropdown-item.is-capitalized(href=helpers.relQString({prefLang: language}))= language
	table.table.is-fullwidth.is-hoverable
		thead
			tr
				mixin sortingHeader(path, text, bottom, right)
					- const sort = sortBy === path && direction;
					th= text
						.dropdown.is-pulled-right(class=`${bottom ? 'is-up' : ''} ${right ? 'is-right' : ''}`)
							.dropdown-trigger(onclick="this.parentNode.classList.toggle('is-active')" style="cursor: pointer;")
								span.icon
									if sort
										if sort === 'asc'
											i.fas.fa-sort-up
										else
											i.fas.fa-sort-down
									else
										i.fas.fa-sort
							.dropdown-menu
								.dropdown-content
									a.dropdown-item(href=`${helpers.relQString({ sort: path, direction: 'asc' })}`) ascending
									a.dropdown-item(href=`${helpers.relQString({ sort: path, direction: 'desc' })}`) descending
									.dropdown-divider
									a.dropdown-item(href=`${helpers.relQString({ sort: '', direction: '' })}`) no sorting
				+sortingHeader('fullName', 'Full Name')
				+sortingHeader('companyName', 'Company', false, true)
		tbody
			each card in cardList
				tr(onclick=`window.location.href="${paths.businessCards(card)}"` style="cursor: pointer;")
					td= card.fullName.prefer(preferLang, '-')
					td= card.companyName.prefer(preferLang, '-')
		tfoot
			tr
				+sortingHeader('fullName', 'Full Name', true)
				+sortingHeader('companyName', 'Company', true, true)
block after-content
	include ../partials/pagination.pug
